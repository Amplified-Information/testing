{
  "version": 4,
  "terraform_version": "1.14.1",
  "serial": 191,
  "lineage": "9f1a99cb-0577-5b01-76f5-f9329838b4e7",
  "outputs": {
    "bastion_dev_private_dns": {
      "value": "ip-10-0-1-200.ec2.internal",
      "type": "string"
    },
    "bastion_dev_public_dns": {
      "value": "ec2-44-220-179-185.compute-1.amazonaws.com",
      "type": "string"
    },
    "data_dev_private_dns": {
      "value": "ip-10-0-1-12.ec2.internal",
      "type": "string"
    },
    "monolith_dev_private_dns": {
      "value": "ip-10-0-1-11.ec2.internal",
      "type": "string"
    },
    "proxy_dev_private_dns": {
      "value": "ip-10-0-1-10.ec2.internal",
      "type": "string"
    },
    "proxy_dev_public_dns": {
      "value": "ec2-54-210-115-180.compute-1.amazonaws.com",
      "type": "string"
    }
  },
  "resources": [
    {
      "mode": "managed",
      "type": "aws_eip_association",
      "name": "proxy_dev_eip_assoc",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "allocation_id": "eipalloc-0a06fd4140fafdd3c",
            "allow_reassociation": null,
            "id": "eipassoc-06fb09f9c96b22323",
            "instance_id": "i-0da594afa688c8151",
            "network_interface_id": "eni-024d1ff9ec98e858d",
            "private_ip_address": "10.0.1.10",
            "public_ip": "54.210.115.180",
            "region": "us-east-1"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "aws_instance.proxy_dev",
            "module.shared.aws_security_group.allow_internal",
            "module.shared.aws_security_group.allow_web_egress",
            "module.shared.aws_security_group.allow_web_ingress",
            "module.shared.aws_security_group.disable_ipv6_ingress",
            "module.shared.aws_subnet.main",
            "module.shared.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_instance",
      "name": "bastion_dev",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 2,
          "attributes": {
            "ami": "ami-0f9c27b471bdcd702",
            "arn": "arn:aws:ec2:us-east-1:063088900305:instance/i-0974966093899ffdb",
            "associate_public_ip_address": true,
            "availability_zone": "us-east-1a",
            "capacity_reservation_specification": [
              {
                "capacity_reservation_preference": "open",
                "capacity_reservation_target": []
              }
            ],
            "cpu_options": [
              {
                "amd_sev_snp": "",
                "core_count": 1,
                "threads_per_core": 2
              }
            ],
            "credit_specification": [
              {
                "cpu_credits": "unlimited"
              }
            ],
            "disable_api_stop": false,
            "disable_api_termination": false,
            "ebs_block_device": [],
            "ebs_optimized": false,
            "enable_primary_ipv6": null,
            "enclave_options": [
              {
                "enabled": false
              }
            ],
            "ephemeral_block_device": [],
            "force_destroy": false,
            "get_password_data": false,
            "hibernation": false,
            "host_id": "",
            "host_resource_group_arn": null,
            "iam_instance_profile": "",
            "id": "i-0974966093899ffdb",
            "instance_initiated_shutdown_behavior": "stop",
            "instance_lifecycle": "",
            "instance_market_options": [],
            "instance_state": "running",
            "instance_type": "t3.nano",
            "ipv6_address_count": 0,
            "ipv6_addresses": [],
            "key_name": "dev",
            "launch_template": [],
            "maintenance_options": [
              {
                "auto_recovery": "default"
              }
            ],
            "metadata_options": [
              {
                "http_endpoint": "enabled",
                "http_protocol_ipv6": "disabled",
                "http_put_response_hop_limit": 1,
                "http_tokens": "optional",
                "instance_metadata_tags": "disabled"
              }
            ],
            "monitoring": false,
            "network_interface": [],
            "outpost_arn": "",
            "password_data": "",
            "placement_group": "",
            "placement_group_id": "",
            "placement_partition_number": 0,
            "primary_network_interface": [
              {
                "delete_on_termination": true,
                "network_interface_id": "eni-0e9a89a4244375677"
              }
            ],
            "primary_network_interface_id": "eni-0e9a89a4244375677",
            "private_dns": "ip-10-0-1-200.ec2.internal",
            "private_dns_name_options": [
              {
                "enable_resource_name_dns_a_record": false,
                "enable_resource_name_dns_aaaa_record": false,
                "hostname_type": "ip-name"
              }
            ],
            "private_ip": "10.0.1.200",
            "public_dns": "ec2-44-220-179-185.compute-1.amazonaws.com",
            "public_ip": "44.220.179.185",
            "region": "us-east-1",
            "root_block_device": [
              {
                "delete_on_termination": true,
                "device_name": "/dev/xvda",
                "encrypted": false,
                "iops": 3000,
                "kms_key_id": "",
                "tags": {},
                "tags_all": {},
                "throughput": 125,
                "volume_id": "vol-04f192837eb0ec1a4",
                "volume_size": 8,
                "volume_type": "gp3"
              }
            ],
            "secondary_private_ips": [],
            "security_groups": [],
            "source_dest_check": true,
            "spot_instance_request_id": "",
            "subnet_id": "subnet-03acdd1073901f3af",
            "tags": {
              "Name": "dev.bastion"
            },
            "tags_all": {
              "Name": "dev.bastion"
            },
            "tenancy": "default",
            "timeouts": null,
            "user_data": "#!/bin/bash\n#!/bin/bash\n\nsudo apt-get update -y \u0026\u0026 sudo apt-get dist-upgrade -y\n\n# Enable automatic security updates\nsudo apt-get install -y unattended-upgrades\nsudo dpkg-reconfigure -plow unattended-upgrades\n\nsudo apt-get install -y unzip jq\n\n# fail2ban\nsudo apt-get install -y fail2ban\nsudo systemctl enable fail2ban\nsudo systemctl start fail2ban\nsudo systemctl status fail2ban\n\n# harden SSH\nsed -i 's/^PermitRootLogin.*/PermitRootLogin no/' /etc/ssh/sshd_config\nsed -i 's/^PasswordAuthentication.*/PasswordAuthentication no/' /etc/ssh/sshd_config\nsed -i 's/^ChallengeResponseAuthentication.*/ChallengeResponseAuthentication no/' /etc/ssh/sshd_config\n\n# restart SSH service\nsystemctl restart ssh\n\n\n\n# create non-root bastion user\nuseradd -m -s /bin/bash bastion\n\n# give bastion sudo privileges without password (optional)\nusermod -aG sudo bastion\n\n# setup SSH directory\nmkdir -p /home/bastion/.ssh\nchown bastion:bastion /home/bastion/.ssh\nchmod 700 /home/bastion/.ssh\n\n# remove any existing authorized_keys for default user\nrm -f /home/ubuntu/.ssh/authorized_keys\nrm -f /home/ec2-user/.ssh/authorized_keys\n\n# copy a non-privileged public key\necho \"ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQDS4Y4saImPHrW8GwlgArdpiTRXUjgNZyR8WgUUa8mnOMscSEuw9qfzKHbzCNOwBpvkajJAmogInYPGyVqZB64+i0ZGUKW4q6onyhlO3ZuwyEKVHW30ZjQuon526U6PmcvtfB7rsgzw8IXUPGLyK6J7cBsvjMWdcniIIpJ/4AGbD/xD19mODs8FAq6TL+O/XFLDHJ4woCsz3dqtmY4I2/En0JW5S6cLIuueYMHlrnWYz5vTI8ruXMgXOCY8ghtZb+vwbV43SlUtRhj50yEU+cnYf7O0dFZSOUlxYwn3Xv/QjDcIRnW137ewxVYXP54Q46NhHU4HSiG3Ns4Tzzt33i/yKO/R1/52MUEzyPk/6njQmHh7R/zqOShuXEPLlIRl4qW0lk02W9ufQTigTBMrnmpESPE2KU/lyywf2BJCjwxZUYIVGZy6zMcrSoYKzQ8v4kyIeTyRTxKGTSOszfmCBdwJF3Q2S2PoNFuqo23y4O5myBxdAMgFO/QQNRmENpGoNk9ih6DVp59wsgm9enxDntCU7rsT1nR69npDEFyFZ0Jj4zssu9RFaDrzPlp+lJ7aB8xymR7RqtM9ATq4/0mQg6LF0oZ82vOAKr/3R2e+3inGZdCwc+EZSxpoKfDUg8QVyqgYUm49dfbSjodpzhcKQvHbA7EPLViEJ/+ZdPUfn/nmnQ==\" \u003e /home/bastion/.ssh/authorized_keys\nchown bastion:bastion /home/bastion/.ssh/authorized_keys\nchmod 600 /home/bastion/.ssh/authorized_keys\n\n",
            "user_data_base64": null,
            "user_data_replace_on_change": false,
            "volume_tags": null,
            "vpc_security_group_ids": [
              "sg-00fa39e2ed6acfcbd",
              "sg-0c4efd04b1371c4ed",
              "sg-0e8a9c8bc3f6e857d",
              "sg-0f9462838269495b6"
            ]
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "identity": {
            "account_id": "063088900305",
            "id": "i-0974966093899ffdb",
            "region": "us-east-1"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6MTIwMDAwMDAwMDAwMCwicmVhZCI6OTAwMDAwMDAwMDAwLCJ1cGRhdGUiOjYwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMiJ9",
          "dependencies": [
            "module.shared.aws_security_group.allow_internal",
            "module.shared.aws_security_group.allow_ssh_ingress",
            "module.shared.aws_security_group.allow_web_egress",
            "module.shared.aws_security_group.disable_ipv6_ingress",
            "module.shared.aws_subnet.main",
            "module.shared.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_instance",
      "name": "data_dev",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 2,
          "attributes": {
            "ami": "ami-0f9c27b471bdcd702",
            "arn": "arn:aws:ec2:us-east-1:063088900305:instance/i-02d7edf74921d9270",
            "associate_public_ip_address": false,
            "availability_zone": "us-east-1a",
            "capacity_reservation_specification": [
              {
                "capacity_reservation_preference": "open",
                "capacity_reservation_target": []
              }
            ],
            "cpu_options": [
              {
                "amd_sev_snp": "",
                "core_count": 1,
                "threads_per_core": 2
              }
            ],
            "credit_specification": [
              {
                "cpu_credits": "unlimited"
              }
            ],
            "disable_api_stop": false,
            "disable_api_termination": false,
            "ebs_block_device": [
              {
                "delete_on_termination": false,
                "device_name": "/dev/xvdf",
                "encrypted": false,
                "iops": 3000,
                "kms_key_id": "",
                "snapshot_id": "",
                "tags": {
                  "Name": "datamnt_dev"
                },
                "tags_all": {
                  "Name": "datamnt_dev"
                },
                "throughput": 125,
                "volume_id": "vol-0d3a782bdfffc34aa",
                "volume_size": 4,
                "volume_type": "gp3"
              }
            ],
            "ebs_optimized": false,
            "enable_primary_ipv6": null,
            "enclave_options": [
              {
                "enabled": false
              }
            ],
            "ephemeral_block_device": [],
            "force_destroy": false,
            "get_password_data": false,
            "hibernation": false,
            "host_id": "",
            "host_resource_group_arn": null,
            "iam_instance_profile": "",
            "id": "i-02d7edf74921d9270",
            "instance_initiated_shutdown_behavior": "stop",
            "instance_lifecycle": "",
            "instance_market_options": [],
            "instance_state": "running",
            "instance_type": "t3.nano",
            "ipv6_address_count": 0,
            "ipv6_addresses": [],
            "key_name": "dev",
            "launch_template": [],
            "maintenance_options": [
              {
                "auto_recovery": "default"
              }
            ],
            "metadata_options": [
              {
                "http_endpoint": "enabled",
                "http_protocol_ipv6": "disabled",
                "http_put_response_hop_limit": 1,
                "http_tokens": "optional",
                "instance_metadata_tags": "disabled"
              }
            ],
            "monitoring": false,
            "network_interface": [],
            "outpost_arn": "",
            "password_data": "",
            "placement_group": "",
            "placement_group_id": "",
            "placement_partition_number": 0,
            "primary_network_interface": [
              {
                "delete_on_termination": true,
                "network_interface_id": "eni-04b80f37e0ca9e3db"
              }
            ],
            "primary_network_interface_id": "eni-04b80f37e0ca9e3db",
            "private_dns": "ip-10-0-1-12.ec2.internal",
            "private_dns_name_options": [
              {
                "enable_resource_name_dns_a_record": false,
                "enable_resource_name_dns_aaaa_record": false,
                "hostname_type": "ip-name"
              }
            ],
            "private_ip": "10.0.1.12",
            "public_dns": "",
            "public_ip": "",
            "region": "us-east-1",
            "root_block_device": [
              {
                "delete_on_termination": true,
                "device_name": "/dev/xvda",
                "encrypted": false,
                "iops": 3000,
                "kms_key_id": "",
                "tags": {},
                "tags_all": {},
                "throughput": 125,
                "volume_id": "vol-082c0eccc5af84921",
                "volume_size": 8,
                "volume_type": "gp3"
              }
            ],
            "secondary_private_ips": [],
            "security_groups": [],
            "source_dest_check": true,
            "spot_instance_request_id": "",
            "subnet_id": "subnet-03acdd1073901f3af",
            "tags": {
              "Name": "dev.data"
            },
            "tags_all": {
              "Name": "dev.data"
            },
            "tenancy": "default",
            "timeouts": null,
            "user_data": "#!/bin/bash\n#!/bin/bash\n\nsudo apt-get update -y \u0026\u0026 sudo apt-get dist-upgrade -y\n\n# Enable automatic security updates\nsudo apt-get install -y unattended-upgrades\nsudo dpkg-reconfigure -plow unattended-upgrades\n\nsudo apt-get install -y unzip jq\n\n# fail2ban\nsudo apt-get install -y fail2ban\nsudo systemctl enable fail2ban\nsudo systemctl start fail2ban\nsudo systemctl status fail2ban\n\n# harden SSH\nsed -i 's/^PermitRootLogin.*/PermitRootLogin no/' /etc/ssh/sshd_config\nsed -i 's/^PasswordAuthentication.*/PasswordAuthentication no/' /etc/ssh/sshd_config\nsed -i 's/^ChallengeResponseAuthentication.*/ChallengeResponseAuthentication no/' /etc/ssh/sshd_config\n\n# restart SSH service\nsystemctl restart ssh\n\n\n#!/bin/bash\n\n# 'internal' user for running internal services\nsudo useradd -m internal\n\n# ssh password so the 'internal' user can access boxes on 10.0.1.0/24 using ssh password auth:\nsudo usermod -p '$6$UjG7OyUN1qVaHENZ$RvQl8XNox9k8Qzl151LuhE4uJSLBe9TNGrN0lZ13QrvzH5tOg7LtfEOveVjPYuNI2wCOGq0NUZA3b7d4yH8Iz.' internal\n# Allow password authentication in SSH\nsudo sed -i 's/^#PasswordAuthentication yes/PasswordAuthentication yes/' /etc/ssh/sshd_config\nsudo sed -i 's/^PasswordAuthentication no/PasswordAuthentication yes/' /etc/ssh/sshd_config\n# Restart SSH service to apply changes\nsudo systemctl restart sshd\n\n# Docker\n# remove any conflicting packages:\nsudo apt remove $(dpkg --get-selections docker.io docker-compose docker-doc podman-docker containerd runc | cut -f1)\n\n# Add Docker's official GPG key:\nsudo apt update\nsudo apt install ca-certificates curl\nsudo install -m 0755 -d /etc/apt/keyrings\nsudo curl -fsSL https://download.docker.com/linux/debian/gpg -o /etc/apt/keyrings/docker.asc\nsudo chmod a+r /etc/apt/keyrings/docker.asc\n\n# Add the repository to Apt sources:\nsudo tee /etc/apt/sources.list.d/docker.sources \u003c\u003cDOCKER_EOF\nTypes: deb\nURIs: https://download.docker.com/linux/debian\nSuites: $(. /etc/os-release \u0026\u0026 echo \"$VERSION_CODENAME\")\nComponents: stable\nSigned-By: /etc/apt/keyrings/docker.asc\nDOCKER_EOF\n\nsudo apt-get update -y \u0026\u0026 sudo apt-get dist-upgrade -y\n\nsudo apt install -y docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin\n\nnewgrp docker # admin user must be in the docker group\n\nsudo systemctl start docker\nsudo systemctl enable docker\nsudo systemctl status docker\n\nsudo usermod -aG docker admin # N.B. 'admin' is the default user on AWS Debian AMIs\nsudo usermod -aG docker internal\nsudo systemctl restart docker\n\n\n\n# prepare mount point for postgres data volume\nmkdir -p /mnt/external\n\n# Check if volume is formatted; format only if needed (i.e. only format on first boot, not on reboots)\nif ! file -s /dev/xvdf | grep -q \"filesystem\"; then\n  mkfs -t ext4 /dev/xvdf\nfi\n\n# Add to fstab if not present (auto-mount on reboots)\ngrep -q \"/dev/xvdf\" /etc/fstab || echo \"/dev/xvdf /mnt/external ext4 defaults,nofail 0 2\" \u003e\u003e /etc/fstab\n\n# Now mount all:\nmount -a\n\n# internal user needs access to the /mnt/external area\nmkdir -p /mnt/external/postgresdata\nchown -R internal:internal /mnt/external\n",
            "user_data_base64": null,
            "user_data_replace_on_change": false,
            "volume_tags": null,
            "vpc_security_group_ids": [
              "sg-00fa39e2ed6acfcbd",
              "sg-0c4efd04b1371c4ed",
              "sg-0c88ff75eb7e7fde0",
              "sg-0e8a9c8bc3f6e857d"
            ]
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "identity": {
            "account_id": "063088900305",
            "id": "i-02d7edf74921d9270",
            "region": "us-east-1"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6MTIwMDAwMDAwMDAwMCwicmVhZCI6OTAwMDAwMDAwMDAwLCJ1cGRhdGUiOjYwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMiJ9",
          "dependencies": [
            "module.shared.aws_security_group.allow_internal",
            "module.shared.aws_security_group.allow_web_egress",
            "module.shared.aws_security_group.allow_web_ingress",
            "module.shared.aws_security_group.disable_ipv6_ingress",
            "module.shared.aws_subnet.main",
            "module.shared.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_instance",
      "name": "monolith_dev",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 2,
          "attributes": {
            "ami": "ami-0f9c27b471bdcd702",
            "arn": "arn:aws:ec2:us-east-1:063088900305:instance/i-0970b8124c612eccb",
            "associate_public_ip_address": false,
            "availability_zone": "us-east-1a",
            "capacity_reservation_specification": [
              {
                "capacity_reservation_preference": "open",
                "capacity_reservation_target": []
              }
            ],
            "cpu_options": [
              {
                "amd_sev_snp": "",
                "core_count": 1,
                "threads_per_core": 2
              }
            ],
            "credit_specification": [
              {
                "cpu_credits": "unlimited"
              }
            ],
            "disable_api_stop": false,
            "disable_api_termination": false,
            "ebs_block_device": [],
            "ebs_optimized": false,
            "enable_primary_ipv6": null,
            "enclave_options": [
              {
                "enabled": false
              }
            ],
            "ephemeral_block_device": [],
            "force_destroy": false,
            "get_password_data": false,
            "hibernation": false,
            "host_id": "",
            "host_resource_group_arn": null,
            "iam_instance_profile": "",
            "id": "i-0970b8124c612eccb",
            "instance_initiated_shutdown_behavior": "stop",
            "instance_lifecycle": "",
            "instance_market_options": [],
            "instance_state": "running",
            "instance_type": "t3.micro",
            "ipv6_address_count": 0,
            "ipv6_addresses": [],
            "key_name": "dev",
            "launch_template": [],
            "maintenance_options": [
              {
                "auto_recovery": "default"
              }
            ],
            "metadata_options": [
              {
                "http_endpoint": "enabled",
                "http_protocol_ipv6": "disabled",
                "http_put_response_hop_limit": 1,
                "http_tokens": "optional",
                "instance_metadata_tags": "disabled"
              }
            ],
            "monitoring": false,
            "network_interface": [],
            "outpost_arn": "",
            "password_data": "",
            "placement_group": "",
            "placement_group_id": "",
            "placement_partition_number": 0,
            "primary_network_interface": [
              {
                "delete_on_termination": true,
                "network_interface_id": "eni-09911b6929d38a904"
              }
            ],
            "primary_network_interface_id": "eni-09911b6929d38a904",
            "private_dns": "ip-10-0-1-11.ec2.internal",
            "private_dns_name_options": [
              {
                "enable_resource_name_dns_a_record": false,
                "enable_resource_name_dns_aaaa_record": false,
                "hostname_type": "ip-name"
              }
            ],
            "private_ip": "10.0.1.11",
            "public_dns": "",
            "public_ip": "",
            "region": "us-east-1",
            "root_block_device": [
              {
                "delete_on_termination": true,
                "device_name": "/dev/xvda",
                "encrypted": false,
                "iops": 3000,
                "kms_key_id": "",
                "tags": {},
                "tags_all": {},
                "throughput": 125,
                "volume_id": "vol-07f142f7306393d17",
                "volume_size": 8,
                "volume_type": "gp3"
              }
            ],
            "secondary_private_ips": [],
            "security_groups": [],
            "source_dest_check": true,
            "spot_instance_request_id": "",
            "subnet_id": "subnet-03acdd1073901f3af",
            "tags": {
              "Name": "dev.monolith"
            },
            "tags_all": {
              "Name": "dev.monolith"
            },
            "tenancy": "default",
            "timeouts": null,
            "user_data": "#!/bin/bash\n#!/bin/bash\n\nsudo apt-get update -y \u0026\u0026 sudo apt-get dist-upgrade -y\n\n# Enable automatic security updates\nsudo apt-get install -y unattended-upgrades\nsudo dpkg-reconfigure -plow unattended-upgrades\n\nsudo apt-get install -y unzip jq\n\n# fail2ban\nsudo apt-get install -y fail2ban\nsudo systemctl enable fail2ban\nsudo systemctl start fail2ban\nsudo systemctl status fail2ban\n\n# harden SSH\nsed -i 's/^PermitRootLogin.*/PermitRootLogin no/' /etc/ssh/sshd_config\nsed -i 's/^PasswordAuthentication.*/PasswordAuthentication no/' /etc/ssh/sshd_config\nsed -i 's/^ChallengeResponseAuthentication.*/ChallengeResponseAuthentication no/' /etc/ssh/sshd_config\n\n# restart SSH service\nsystemctl restart ssh\n\n\n#!/bin/bash\n\n# 'internal' user for running internal services\nsudo useradd -m internal\n\n# ssh password so the 'internal' user can access boxes on 10.0.1.0/24 using ssh password auth:\nsudo usermod -p '$6$UjG7OyUN1qVaHENZ$RvQl8XNox9k8Qzl151LuhE4uJSLBe9TNGrN0lZ13QrvzH5tOg7LtfEOveVjPYuNI2wCOGq0NUZA3b7d4yH8Iz.' internal\n# Allow password authentication in SSH\nsudo sed -i 's/^#PasswordAuthentication yes/PasswordAuthentication yes/' /etc/ssh/sshd_config\nsudo sed -i 's/^PasswordAuthentication no/PasswordAuthentication yes/' /etc/ssh/sshd_config\n# Restart SSH service to apply changes\nsudo systemctl restart sshd\n\n# Docker\n# remove any conflicting packages:\nsudo apt remove $(dpkg --get-selections docker.io docker-compose docker-doc podman-docker containerd runc | cut -f1)\n\n# Add Docker's official GPG key:\nsudo apt update\nsudo apt install ca-certificates curl\nsudo install -m 0755 -d /etc/apt/keyrings\nsudo curl -fsSL https://download.docker.com/linux/debian/gpg -o /etc/apt/keyrings/docker.asc\nsudo chmod a+r /etc/apt/keyrings/docker.asc\n\n# Add the repository to Apt sources:\nsudo tee /etc/apt/sources.list.d/docker.sources \u003c\u003cDOCKER_EOF\nTypes: deb\nURIs: https://download.docker.com/linux/debian\nSuites: $(. /etc/os-release \u0026\u0026 echo \"$VERSION_CODENAME\")\nComponents: stable\nSigned-By: /etc/apt/keyrings/docker.asc\nDOCKER_EOF\n\nsudo apt-get update -y \u0026\u0026 sudo apt-get dist-upgrade -y\n\nsudo apt install -y docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin\n\nnewgrp docker # admin user must be in the docker group\n\nsudo systemctl start docker\nsudo systemctl enable docker\nsudo systemctl status docker\n\nsudo usermod -aG docker admin # N.B. 'admin' is the default user on AWS Debian AMIs\nsudo usermod -aG docker internal\nsudo systemctl restart docker\n\n\n",
            "user_data_base64": null,
            "user_data_replace_on_change": false,
            "volume_tags": null,
            "vpc_security_group_ids": [
              "sg-00fa39e2ed6acfcbd",
              "sg-0c4efd04b1371c4ed",
              "sg-0e8a9c8bc3f6e857d"
            ]
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "identity": {
            "account_id": "063088900305",
            "id": "i-0970b8124c612eccb",
            "region": "us-east-1"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6MTIwMDAwMDAwMDAwMCwicmVhZCI6OTAwMDAwMDAwMDAwLCJ1cGRhdGUiOjYwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMiJ9",
          "dependencies": [
            "module.shared.aws_security_group.allow_internal",
            "module.shared.aws_security_group.allow_web_egress",
            "module.shared.aws_security_group.disable_ipv6_ingress",
            "module.shared.aws_subnet.main",
            "module.shared.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_instance",
      "name": "proxy_dev",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 2,
          "attributes": {
            "ami": "ami-0f9c27b471bdcd702",
            "arn": "arn:aws:ec2:us-east-1:063088900305:instance/i-0da594afa688c8151",
            "associate_public_ip_address": true,
            "availability_zone": "us-east-1a",
            "capacity_reservation_specification": [
              {
                "capacity_reservation_preference": "open",
                "capacity_reservation_target": []
              }
            ],
            "cpu_options": [
              {
                "amd_sev_snp": "",
                "core_count": 1,
                "threads_per_core": 2
              }
            ],
            "credit_specification": [
              {
                "cpu_credits": "unlimited"
              }
            ],
            "disable_api_stop": false,
            "disable_api_termination": false,
            "ebs_block_device": [],
            "ebs_optimized": false,
            "enable_primary_ipv6": null,
            "enclave_options": [
              {
                "enabled": false
              }
            ],
            "ephemeral_block_device": [],
            "force_destroy": false,
            "get_password_data": false,
            "hibernation": false,
            "host_id": "",
            "host_resource_group_arn": null,
            "iam_instance_profile": "",
            "id": "i-0da594afa688c8151",
            "instance_initiated_shutdown_behavior": "stop",
            "instance_lifecycle": "",
            "instance_market_options": [],
            "instance_state": "running",
            "instance_type": "t3.nano",
            "ipv6_address_count": 0,
            "ipv6_addresses": [],
            "key_name": "dev",
            "launch_template": [],
            "maintenance_options": [
              {
                "auto_recovery": "default"
              }
            ],
            "metadata_options": [
              {
                "http_endpoint": "enabled",
                "http_protocol_ipv6": "disabled",
                "http_put_response_hop_limit": 1,
                "http_tokens": "optional",
                "instance_metadata_tags": "disabled"
              }
            ],
            "monitoring": false,
            "network_interface": [],
            "outpost_arn": "",
            "password_data": "",
            "placement_group": "",
            "placement_group_id": "",
            "placement_partition_number": 0,
            "primary_network_interface": [
              {
                "delete_on_termination": true,
                "network_interface_id": "eni-024d1ff9ec98e858d"
              }
            ],
            "primary_network_interface_id": "eni-024d1ff9ec98e858d",
            "private_dns": "ip-10-0-1-10.ec2.internal",
            "private_dns_name_options": [
              {
                "enable_resource_name_dns_a_record": false,
                "enable_resource_name_dns_aaaa_record": false,
                "hostname_type": "ip-name"
              }
            ],
            "private_ip": "10.0.1.10",
            "public_dns": "ec2-54-210-115-180.compute-1.amazonaws.com",
            "public_ip": "54.210.115.180",
            "region": "us-east-1",
            "root_block_device": [
              {
                "delete_on_termination": true,
                "device_name": "/dev/xvda",
                "encrypted": false,
                "iops": 3000,
                "kms_key_id": "",
                "tags": {},
                "tags_all": {},
                "throughput": 125,
                "volume_id": "vol-02c1d61d562bf82d6",
                "volume_size": 8,
                "volume_type": "gp3"
              }
            ],
            "secondary_private_ips": [],
            "security_groups": [],
            "source_dest_check": true,
            "spot_instance_request_id": "",
            "subnet_id": "subnet-03acdd1073901f3af",
            "tags": {
              "Name": "dev.proxy"
            },
            "tags_all": {
              "Name": "dev.proxy"
            },
            "tenancy": "default",
            "timeouts": null,
            "user_data": "#!/bin/bash\n#!/bin/bash\n\nsudo apt-get update -y \u0026\u0026 sudo apt-get dist-upgrade -y\n\n# Enable automatic security updates\nsudo apt-get install -y unattended-upgrades\nsudo dpkg-reconfigure -plow unattended-upgrades\n\nsudo apt-get install -y unzip jq\n\n# fail2ban\nsudo apt-get install -y fail2ban\nsudo systemctl enable fail2ban\nsudo systemctl start fail2ban\nsudo systemctl status fail2ban\n\n# harden SSH\nsed -i 's/^PermitRootLogin.*/PermitRootLogin no/' /etc/ssh/sshd_config\nsed -i 's/^PasswordAuthentication.*/PasswordAuthentication no/' /etc/ssh/sshd_config\nsed -i 's/^ChallengeResponseAuthentication.*/ChallengeResponseAuthentication no/' /etc/ssh/sshd_config\n\n# restart SSH service\nsystemctl restart ssh\n\n\n#!/bin/bash\n\n# 'internal' user for running internal services\nsudo useradd -m internal\n\n# ssh password so the 'internal' user can access boxes on 10.0.1.0/24 using ssh password auth:\nsudo usermod -p '$6$UjG7OyUN1qVaHENZ$RvQl8XNox9k8Qzl151LuhE4uJSLBe9TNGrN0lZ13QrvzH5tOg7LtfEOveVjPYuNI2wCOGq0NUZA3b7d4yH8Iz.' internal\n# Allow password authentication in SSH\nsudo sed -i 's/^#PasswordAuthentication yes/PasswordAuthentication yes/' /etc/ssh/sshd_config\nsudo sed -i 's/^PasswordAuthentication no/PasswordAuthentication yes/' /etc/ssh/sshd_config\n# Restart SSH service to apply changes\nsudo systemctl restart sshd\n\n# Docker\n# remove any conflicting packages:\nsudo apt remove $(dpkg --get-selections docker.io docker-compose docker-doc podman-docker containerd runc | cut -f1)\n\n# Add Docker's official GPG key:\nsudo apt update\nsudo apt install ca-certificates curl\nsudo install -m 0755 -d /etc/apt/keyrings\nsudo curl -fsSL https://download.docker.com/linux/debian/gpg -o /etc/apt/keyrings/docker.asc\nsudo chmod a+r /etc/apt/keyrings/docker.asc\n\n# Add the repository to Apt sources:\nsudo tee /etc/apt/sources.list.d/docker.sources \u003c\u003cDOCKER_EOF\nTypes: deb\nURIs: https://download.docker.com/linux/debian\nSuites: $(. /etc/os-release \u0026\u0026 echo \"$VERSION_CODENAME\")\nComponents: stable\nSigned-By: /etc/apt/keyrings/docker.asc\nDOCKER_EOF\n\nsudo apt-get update -y \u0026\u0026 sudo apt-get dist-upgrade -y\n\nsudo apt install -y docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin\n\nnewgrp docker # admin user must be in the docker group\n\nsudo systemctl start docker\nsudo systemctl enable docker\nsudo systemctl status docker\n\nsudo usermod -aG docker admin # N.B. 'admin' is the default user on AWS Debian AMIs\nsudo usermod -aG docker internal\nsudo systemctl restart docker\n\n\n",
            "user_data_base64": null,
            "user_data_replace_on_change": false,
            "volume_tags": null,
            "vpc_security_group_ids": [
              "sg-00fa39e2ed6acfcbd",
              "sg-0c4efd04b1371c4ed",
              "sg-0c88ff75eb7e7fde0",
              "sg-0e8a9c8bc3f6e857d"
            ]
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "identity": {
            "account_id": "063088900305",
            "id": "i-0da594afa688c8151",
            "region": "us-east-1"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6MTIwMDAwMDAwMDAwMCwicmVhZCI6OTAwMDAwMDAwMDAwLCJ1cGRhdGUiOjYwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMiJ9",
          "dependencies": [
            "module.shared.aws_security_group.allow_internal",
            "module.shared.aws_security_group.allow_web_egress",
            "module.shared.aws_security_group.allow_web_ingress",
            "module.shared.aws_security_group.disable_ipv6_ingress",
            "module.shared.aws_subnet.main",
            "module.shared.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_volume_attachment",
      "name": "data_dev_volume_attachment",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "device_name": "/dev/xvdf",
            "force_detach": null,
            "id": "vai-1577081306",
            "instance_id": "i-02d7edf74921d9270",
            "region": "us-east-1",
            "skip_destroy": null,
            "stop_instance_before_detaching": null,
            "timeouts": null,
            "volume_id": "vol-0d3a782bdfffc34aa"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDAsImRlbGV0ZSI6MzAwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "aws_instance.data_dev",
            "module.shared.aws_security_group.allow_internal",
            "module.shared.aws_security_group.allow_web_egress",
            "module.shared.aws_security_group.allow_web_ingress",
            "module.shared.aws_security_group.disable_ipv6_ingress",
            "module.shared.aws_subnet.main",
            "module.shared.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.shared",
      "mode": "managed",
      "type": "aws_internet_gateway",
      "name": "main",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:ec2:us-east-1:063088900305:internet-gateway/igw-0cc46678d1d65a544",
            "id": "igw-0cc46678d1d65a544",
            "owner_id": "063088900305",
            "region": "us-east-1",
            "tags": {
              "Name": "dev-igw"
            },
            "tags_all": {
              "Name": "dev-igw"
            },
            "timeouts": null,
            "vpc_id": "vpc-0e82e71b664142dcd"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxMjAwMDAwMDAwMDAwLCJkZWxldGUiOjEyMDAwMDAwMDAwMDAsInVwZGF0ZSI6MTIwMDAwMDAwMDAwMH19",
          "dependencies": [
            "module.shared.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.shared",
      "mode": "managed",
      "type": "aws_route_table",
      "name": "main",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:ec2:us-east-1:063088900305:route-table/rtb-0537927da939fbb92",
            "id": "rtb-0537927da939fbb92",
            "owner_id": "063088900305",
            "propagating_vgws": [],
            "region": "us-east-1",
            "route": [
              {
                "carrier_gateway_id": "",
                "cidr_block": "0.0.0.0/0",
                "core_network_arn": "",
                "destination_prefix_list_id": "",
                "egress_only_gateway_id": "",
                "gateway_id": "igw-0cc46678d1d65a544",
                "ipv6_cidr_block": "",
                "local_gateway_id": "",
                "nat_gateway_id": "",
                "network_interface_id": "",
                "transit_gateway_id": "",
                "vpc_endpoint_id": "",
                "vpc_peering_connection_id": ""
              }
            ],
            "tags": {
              "Name": "dev-route-table"
            },
            "tags_all": {
              "Name": "dev-route-table"
            },
            "timeouts": null,
            "vpc_id": "vpc-0e82e71b664142dcd"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "identity": {
            "account_id": "063088900305",
            "id": "rtb-0537927da939fbb92",
            "region": "us-east-1"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDAsImRlbGV0ZSI6MzAwMDAwMDAwMDAwLCJ1cGRhdGUiOjEyMDAwMDAwMDAwMH19",
          "dependencies": [
            "module.shared.aws_internet_gateway.main",
            "module.shared.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.shared",
      "mode": "managed",
      "type": "aws_route_table_association",
      "name": "main",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "gateway_id": "",
            "id": "rtbassoc-016a74535c1438615",
            "region": "us-east-1",
            "route_table_id": "rtb-0537927da939fbb92",
            "subnet_id": "subnet-03acdd1073901f3af",
            "timeouts": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDAsImRlbGV0ZSI6MzAwMDAwMDAwMDAwLCJ1cGRhdGUiOjEyMDAwMDAwMDAwMH19",
          "dependencies": [
            "module.shared.aws_internet_gateway.main",
            "module.shared.aws_route_table.main",
            "module.shared.aws_subnet.main",
            "module.shared.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.shared",
      "mode": "managed",
      "type": "aws_security_group",
      "name": "allow_internal",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:us-east-1:063088900305:security-group/sg-0c4efd04b1371c4ed",
            "description": "Allow internal traffic between instances",
            "egress": [
              {
                "cidr_blocks": [
                  "10.0.1.0/24"
                ],
                "description": "",
                "from_port": 0,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "-1",
                "security_groups": [],
                "self": false,
                "to_port": 65535
              }
            ],
            "id": "sg-0c4efd04b1371c4ed",
            "ingress": [
              {
                "cidr_blocks": [
                  "10.0.1.0/24"
                ],
                "description": "",
                "from_port": 0,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "-1",
                "security_groups": [],
                "self": false,
                "to_port": 65535
              }
            ],
            "name": "allow_internal",
            "name_prefix": "",
            "owner_id": "063088900305",
            "region": "us-east-1",
            "revoke_rules_on_delete": false,
            "tags": {},
            "tags_all": {},
            "timeouts": null,
            "vpc_id": "vpc-0e82e71b664142dcd"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "identity": {
            "account_id": "063088900305",
            "id": "sg-0c4efd04b1371c4ed",
            "region": "us-east-1"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6OTAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0=",
          "dependencies": [
            "module.shared.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.shared",
      "mode": "managed",
      "type": "aws_security_group",
      "name": "allow_ssh_ingress",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:us-east-1:063088900305:security-group/sg-0f9462838269495b6",
            "description": "Security group allowing SSH (port 22) ingress for IPv4",
            "egress": [],
            "id": "sg-0f9462838269495b6",
            "ingress": [
              {
                "cidr_blocks": [
                  "0.0.0.0/0"
                ],
                "description": "Allow inbound SSH traffic",
                "from_port": 22,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [],
                "self": false,
                "to_port": 22
              }
            ],
            "name": "allow_ssh_ingress",
            "name_prefix": "",
            "owner_id": "063088900305",
            "region": "us-east-1",
            "revoke_rules_on_delete": false,
            "tags": {},
            "tags_all": {},
            "timeouts": null,
            "vpc_id": "vpc-0e82e71b664142dcd"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "identity": {
            "account_id": "063088900305",
            "id": "sg-0f9462838269495b6",
            "region": "us-east-1"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6OTAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0=",
          "dependencies": [
            "module.shared.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.shared",
      "mode": "managed",
      "type": "aws_security_group",
      "name": "allow_web_egress",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:us-east-1:063088900305:security-group/sg-0e8a9c8bc3f6e857d",
            "description": "Managed by Terraform",
            "egress": [
              {
                "cidr_blocks": [
                  "0.0.0.0/0"
                ],
                "description": "Allow IPv4 outbound traffic on port 443",
                "from_port": 443,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [],
                "self": false,
                "to_port": 443
              },
              {
                "cidr_blocks": [
                  "0.0.0.0/0"
                ],
                "description": "Allow IPv4 outbound traffic on port 80",
                "from_port": 80,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [],
                "self": false,
                "to_port": 80
              },
              {
                "cidr_blocks": [],
                "description": "Allow all IPv6 outbound traffic on port 443",
                "from_port": 443,
                "ipv6_cidr_blocks": [
                  "::/0"
                ],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [],
                "self": false,
                "to_port": 443
              },
              {
                "cidr_blocks": [],
                "description": "Allow all IPv6 outbound traffic on port 80",
                "from_port": 80,
                "ipv6_cidr_blocks": [
                  "::/0"
                ],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [],
                "self": false,
                "to_port": 80
              }
            ],
            "id": "sg-0e8a9c8bc3f6e857d",
            "ingress": [],
            "name": "allow_web_egress",
            "name_prefix": "",
            "owner_id": "063088900305",
            "region": "us-east-1",
            "revoke_rules_on_delete": false,
            "tags": {},
            "tags_all": {},
            "timeouts": null,
            "vpc_id": "vpc-0e82e71b664142dcd"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "identity": {
            "account_id": "063088900305",
            "id": "sg-0e8a9c8bc3f6e857d",
            "region": "us-east-1"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6OTAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0=",
          "dependencies": [
            "module.shared.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.shared",
      "mode": "managed",
      "type": "aws_security_group",
      "name": "allow_web_ingress",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:us-east-1:063088900305:security-group/sg-0c88ff75eb7e7fde0",
            "description": "Security group allowing HTTP (port 80) and HTTPS (port 443) ingress for IPv4",
            "egress": [],
            "id": "sg-0c88ff75eb7e7fde0",
            "ingress": [
              {
                "cidr_blocks": [
                  "0.0.0.0/0"
                ],
                "description": "Allow inbound HTTP traffic",
                "from_port": 80,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [],
                "self": false,
                "to_port": 80
              },
              {
                "cidr_blocks": [
                  "0.0.0.0/0"
                ],
                "description": "Allow inbound HTTPS traffic",
                "from_port": 443,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [],
                "self": false,
                "to_port": 443
              }
            ],
            "name": "allow_web_ingress",
            "name_prefix": "",
            "owner_id": "063088900305",
            "region": "us-east-1",
            "revoke_rules_on_delete": false,
            "tags": {},
            "tags_all": {},
            "timeouts": null,
            "vpc_id": "vpc-0e82e71b664142dcd"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "identity": {
            "account_id": "063088900305",
            "id": "sg-0c88ff75eb7e7fde0",
            "region": "us-east-1"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6OTAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0=",
          "dependencies": [
            "module.shared.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.shared",
      "mode": "managed",
      "type": "aws_security_group",
      "name": "disable_egress",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:us-east-1:063088900305:security-group/sg-07fe85ce02b8f0861",
            "description": "Managed by Terraform",
            "egress": [],
            "id": "sg-07fe85ce02b8f0861",
            "ingress": [],
            "name": "disable_egress",
            "name_prefix": "",
            "owner_id": "063088900305",
            "region": "us-east-1",
            "revoke_rules_on_delete": true,
            "tags": {},
            "tags_all": {},
            "timeouts": null,
            "vpc_id": "vpc-0e82e71b664142dcd"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "identity": {
            "account_id": "063088900305",
            "id": "sg-07fe85ce02b8f0861",
            "region": "us-east-1"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6OTAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0=",
          "dependencies": [
            "module.shared.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.shared",
      "mode": "managed",
      "type": "aws_security_group",
      "name": "disable_ipv6_ingress",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:us-east-1:063088900305:security-group/sg-00fa39e2ed6acfcbd",
            "description": "Security group blocking all IPv6 traffic",
            "egress": [],
            "id": "sg-00fa39e2ed6acfcbd",
            "ingress": [
              {
                "cidr_blocks": [],
                "description": "",
                "from_port": 0,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "-1",
                "security_groups": [],
                "self": false,
                "to_port": 0
              }
            ],
            "name": "disable_ipv6_ingress",
            "name_prefix": "",
            "owner_id": "063088900305",
            "region": "us-east-1",
            "revoke_rules_on_delete": false,
            "tags": {},
            "tags_all": {},
            "timeouts": null,
            "vpc_id": "vpc-0e82e71b664142dcd"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "identity": {
            "account_id": "063088900305",
            "id": "sg-00fa39e2ed6acfcbd",
            "region": "us-east-1"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6OTAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0=",
          "dependencies": [
            "module.shared.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.shared",
      "mode": "managed",
      "type": "aws_subnet",
      "name": "main",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:us-east-1:063088900305:subnet/subnet-03acdd1073901f3af",
            "assign_ipv6_address_on_creation": false,
            "availability_zone": "us-east-1a",
            "availability_zone_id": "use1-az1",
            "cidr_block": "10.0.1.0/24",
            "customer_owned_ipv4_pool": "",
            "enable_dns64": false,
            "enable_lni_at_device_index": 0,
            "enable_resource_name_dns_a_record_on_launch": false,
            "enable_resource_name_dns_aaaa_record_on_launch": false,
            "id": "subnet-03acdd1073901f3af",
            "ipv6_cidr_block": "",
            "ipv6_cidr_block_association_id": "",
            "ipv6_native": false,
            "map_customer_owned_ip_on_launch": false,
            "map_public_ip_on_launch": false,
            "outpost_arn": "",
            "owner_id": "063088900305",
            "private_dns_hostname_type_on_launch": "ip-name",
            "region": "us-east-1",
            "tags": {
              "Name": "dev-subnet"
            },
            "tags_all": {
              "Name": "dev-subnet"
            },
            "timeouts": null,
            "vpc_id": "vpc-0e82e71b664142dcd"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "identity": {
            "account_id": "063088900305",
            "id": "subnet-03acdd1073901f3af",
            "region": "us-east-1"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6MTIwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMSJ9",
          "dependencies": [
            "module.shared.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.shared",
      "mode": "managed",
      "type": "aws_vpc",
      "name": "main",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:us-east-1:063088900305:vpc/vpc-0e82e71b664142dcd",
            "assign_generated_ipv6_cidr_block": false,
            "cidr_block": "10.0.0.0/16",
            "default_network_acl_id": "acl-02d9c38591abacf5a",
            "default_route_table_id": "rtb-002168662b2b52cf2",
            "default_security_group_id": "sg-0f085a5cd1f5a56e0",
            "dhcp_options_id": "dopt-0396b50cf23563bd8",
            "enable_dns_hostnames": true,
            "enable_dns_support": true,
            "enable_network_address_usage_metrics": false,
            "id": "vpc-0e82e71b664142dcd",
            "instance_tenancy": "default",
            "ipv4_ipam_pool_id": null,
            "ipv4_netmask_length": null,
            "ipv6_association_id": "",
            "ipv6_cidr_block": "",
            "ipv6_cidr_block_network_border_group": "",
            "ipv6_ipam_pool_id": "",
            "ipv6_netmask_length": 0,
            "main_route_table_id": "rtb-002168662b2b52cf2",
            "owner_id": "063088900305",
            "region": "us-east-1",
            "tags": {
              "Name": "dev-vpc"
            },
            "tags_all": {
              "Name": "dev-vpc"
            }
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "identity": {
            "account_id": "063088900305",
            "id": "vpc-0e82e71b664142dcd",
            "region": "us-east-1"
          },
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ=="
        }
      ]
    }
  ],
  "check_results": null
}
